# 在Ubuntu 20.04上安装Obsidian

> 作者：张子宇

Obsidian 是一款优秀的笔记软件，它使用 **Markdown 语法**记录笔记，支持**LaTex渲染**，以类似**git仓库**的形式来构建知识库。对于从事 ROS 和 C++ 开发的团队来说，用它来记录开发笔记、整理代码片段和管理项目文档都非常方便，符合开发习惯。

## 背景问题

在 Ubuntu 20.04 系统上，直接使用最新版的 Obsidian 会遇到一个问题：由于其内嵌的 Electron 框架与系统存在兼容性 Bug，导致在创建或打开新的笔记仓库时，文件选择器无法正常选择文件夹，从而无法使用。

一个有效的解决方案是：**安装最新版的软件，但使用旧版的启动程序来绕过这个问题。** 这样既能使用最新的 Obsidian 功能，又能避免启动时的 Bug。

## 配置流程

### 第 1 步：安装最新版 Obsidian

首先，我们从官方网站下载并安装最新版的 .deb 文件。这会为我们设置好软件主体、系统图标和默认的桌面快捷方式。

1. 前往 [Obsidian 官方网站](https://obsidian.md/)下载最新的 `.deb` 安装包。
    
2. 下载完成后，通过终端安装它：    
    `sudo dpkg -i Obsidian-x.x.x.deb`

### 第 2 步：下载旧版 AppImage 作为启动器

接下来，我们下载一个不存在文件夹选择 Bug 的旧版本 AppImage。我们仅用它来启动 Obsidian，而核心程序依然是上一步安装的最新版。

1. **下载链接**: [Obsidian v1.8.10 AppImage](https://github.com/obsidianmd/obsidian-releases/releases/tag/v1.10.3)，这是Obsidian的官方Github发行页。
    - 在该页面中找到名为 Obsidian-1.8.10.AppImage 的文件并下载。
    
2. **赋予执行权限并移动到固定位置**：右击属性 - 权限 - 允许文件作为程序执行，然后将它移动到一个确定的目录。

### 第 3 步：创建自定义桌面快捷方式

为了方便启动，我们可以创建一个桌面快捷方式。默认安装的快捷方式会直接运行新版程序，我们需要创建一个自定义的快捷方式，让它指向我们的旧版 AppImage 启动器。

1. **复制默认快捷方式文件**：将系统默认的快捷方式文件复制到桌面。找到`/usr/share/applications`文件夹，里面全都是快捷方式。找到`obsidian.desktop`并复制到桌面文件夹（注意，要在文件管理器中打开桌面文件夹）中。
	> 其实，其他软件的快捷方式你也可以复制到桌面来。
    
2. **修改快捷方式配置**：双击打开刚刚复制的文件，这会编辑文本。      
    
3. **编辑 Exec 行**：在打开的文件中，找到以 Exec= 开头的那一行。它的原始内容可能类似 Exec=obsidian %u。将其修改为指向我们 AppImage 文件的绝对路径：
	 ```
	 Exec=/home/zzy/下载/Obsidian-1.8.10.AppImage %U
	 ```
    记得改为你自己的路径。修改完成后保存并关闭文件。  

现在，你可以在桌面上右击这个快捷方式，选择“允许启动”，然后就可以像在windows中启动程序一样启动了。